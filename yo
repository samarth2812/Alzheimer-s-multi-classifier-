model EmailQueue {
  id           String     @id @default(uuid())
  to           String
  subject      String
  body         String
  status       EmailStatus  @default(PENDING) // indexed
  retryCount   Int         @default(0)
  maxRetries   Int         @default(3)
  error        String?
  scheduledAt  DateTime    @default(now())     // for delaying retry
  sentAt       DateTime?
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
}

enum EmailStatus {
  PENDING
  SENDING
  SENT
  FAILED
  ABORTED // optional: exceeded maxRetries
}

@@index([status, scheduledAt])
