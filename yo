import { prisma } from "./path-to-your-prisma-instance"; // adjust path accordingly

// Reuse your existing searchUsers logic in a new util
export const getAssigneesFromEmails = async (
  sentTo: string[],
  cc: string[]
): Promise<{ name: string; email: string }[]> => {
  try {
    const allEmails = Array.from(new Set([...sentTo, ...cc])); // merge & remove duplicates

    const users = await prisma.user.findMany({
      where: {
        email: {
          in: allEmails,
        },
      },
      select: {
        name: true,
        email: true,
      },
    });

    return users;
  } catch (error: any) {
    throw new Error(`Failed to get assignees: ${error.message}`);
  }
};
